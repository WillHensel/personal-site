<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    <title>Will Hensel - Snake Project</title>
    <link rel="icon" href="/images/keyboard.svg" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Forum&family=Frank+Ruhl+Libre:wght@300..900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="/css/main.css" />
    
<link rel="stylesheet" href="/css/projects/item.css" />
</head>

<body>
    <header>
        <div class="title-section">
            <h1>Will Hensel</h1>
            <div class="social-links">
                <a href="https://github.com/WillHensel" target="_blank">
                    <img class="icon" src="/images/github.svg" />
                </a>
                <a href="https://www.linkedin.com/in/wrhensel" target="_blank">
                    <img class="icon" src="/images/linkedin.svg" />
                </a>
            </div>
        </div>
        <hr />
        <nav>
            <ul>
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/resume">Resume</a>
                </li>
                <li>
                    <a href="/projects">Projects</a>
                </li>
                <li>
                    <a href="/blog">Blog</a>
                </li>
            </ul>
        </nav>
        <hr />

        <!-- <div class="print-only">
            <h1>Will Hensel</h1>
        </div> -->
    </header>

    


<main>
    <div class="emscripten-container">
        <figure style="overflow:visible;" id="spinner">
    <div class="spinner"></div>
</figure>
<div class="emscripten" id="status">Downloading...</div>
<div class="emscripten">
    <progress value="0" max="100" id="progress" hidden=1></progress>
</div>
<div class="emscripten_border">
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" tabindex=-1></canvas>
</div>
    </div>
    <small><em>* Touch controls are not supported</em></small>
    <div class="text-content">
        <div class="title-link-container">
            <h2>Raylib Snake</h2>
            <a class="icon" href="https://github.com/WillHensel/snake-raylib" target="_blank"><img
                    src="/images/github.svg" /></a>
        </div>
        <p>This was the first thing I did as an introductory project to Raylib, but also to get back into C++ after
            a bit of a break from it. When I made it, I had just read <a href="https://gameprogrammingpatterns.com">Game
                Programming Patterns</a> by Robert Nystrom so I also
            took it as an opportunity to implement some of those patterns.</p>

        <p>The game loop pattern is the most obvious
            usage of the patterns in this book. In addition, many of the classes use the update method pattern and
            the component pattern.</p>

        <p>To handle button input, I make use of callback function pointers to "bubble up"
            click events to the method or function which initialized the button. For instance, the "Start game" button
            is constructed in
            the GameUiComponent class. The Game class holds an instance of GameUiComponent and passes a lambda
            function to its DrawStartScreen method which in turn passes it to the button. When the button is
            clicked, the method is called and the Game class can handle it properly. </p>

        <p>The Snake is implemented as a
            singly linked list, this makes the movement trivial to implement. We can simply traverse the linked list
            from the head, which corresponds to the head of the snake, making each cell's position the position of
            previous cell. It also means we don't have the overhead of a dynamically sized container like a vector,
            and we don't need to worry about storing everything in contiguous memory like with an array (as well as
            a vector). We just heap allocate new cells wherever they fit and save the pointer.</p>
        </p>
    </div>
</main>

<script type='text/javascript'>
    var statusElement = document.getElementById('status');
    var progressElement = document.getElementById('progress');
    var spinnerElement = document.getElementById('spinner');

    var Module = {
        print: (function () {
            var element = document.getElementById('output');
            if (element) element.value = ''; // clear browser cache
            return (...args) => {
                var text = args.join(' ');
                // These replacements are necessary if you render to raw HTML
                //text = text.replace(/&/g, "&amp;");
                //text = text.replace(/</g, "&lt;");
                //text = text.replace(/>/g, "&gt;");
                //text = text.replace('\n', '<br>', 'g');
                console.log(text);
                if (element) {
                    element.value += text + "\n";
                    element.scrollTop = element.scrollHeight; // focus on bottom
                }
            };
        })(),
        canvas: (() => {
            var canvas = document.getElementById('canvas');

            // As a default initial behavior, pop up an alert when webgl context is lost. To make your
            // application robust, you may want to override this behavior before shipping!
            // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
            canvas.addEventListener("webglcontextlost", (e) => { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);

            return canvas;
        })(),
        setStatus: (text) => {
            Module.setStatus.last ??= { time: Date.now(), text: '' };
            if (text === Module.setStatus.last.text) return;
            var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
            var now = Date.now();
            if (m && now - Module.setStatus.last.time < 30) return; // if this is a progress update, skip it if too soon
            Module.setStatus.last.time = now;
            Module.setStatus.last.text = text;
            if (m) {
                text = m[1];
                progressElement.value = parseInt(m[2]) * 100;
                progressElement.max = parseInt(m[4]) * 100;
                progressElement.hidden = false;
                spinnerElement.hidden = false;
            } else {
                progressElement.value = null;
                progressElement.max = null;
                progressElement.hidden = true;
                if (!text) spinnerElement.hidden = true;
            }
            statusElement.innerHTML = text;
        },
        totalDependencies: 0,
        monitorRunDependencies: (left) => {
            this.totalDependencies = Math.max(this.totalDependencies, left);
            Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies - left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
        }
    };
    Module.setStatus('Downloading...');
    window.onerror = () => {
        Module.setStatus('Exception thrown, see JavaScript console');
        spinnerElement.style.display = 'none';
        Module.setStatus = (text) => {
            if (text) console.error('[post-exception status] ' + text);
        };
    };
</script>

<script async src="/js/projects/raylib-snake/snake-raylib.js"></script>

</body>



</html>